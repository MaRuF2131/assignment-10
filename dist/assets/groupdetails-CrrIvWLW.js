import{r as n,u as D,b as S,a as Y,j as t}from"./index-9JvSthaT.js";import{f as E}from"./dateformate-DsN9-pZW.js";import{S as l}from"./sweetalert2.esm.all-DWO__QVt.js";const k=()=>{const[j,m]=n.useState(!0),[e,b]=n.useState(null),[w,f]=n.useState("Join to group"),[h,x]=n.useState(null),{user:r}=D(),a=S(),v=Y();n.useEffect(()=>{document.title="Group Details- HobbyHub"},[]),n.useEffect(()=>{var o;try{const s=((o=a==null?void 0:a.state)==null?void 0:o.massage)??null;if(!s){x("You do not have such a group."),m(!1);return}b(s);const i=new Date,u=new Date(i.getFullYear(),i.getMonth(),i.getDate()),g=new Date(s.startDate);(r==null?void 0:r.email)===s.userEmail?f("Joined (You Owner)"):u>=g&&f("Unable to join (Activity Started)")}catch{x("Something went wrong.")}finally{m(!1)}},[a==null?void 0:a.state,r]);const c=o=>{l.fire({icon:"error",title:"Group join!",text:o})},y=async o=>{if(o.preventDefault(),!e)return;const s=new Date,i=new Date(s.getFullYear(),s.getMonth(),s.getDate()),u=new Date(e.startDate),p=await(await fetch(`https://express-server-for-practice.vercel.app/joineduser?email=${r==null?void 0:r.email}&groupId=${e==null?void 0:e._id}`)).json();if(p.sign===!0)return c(p.message);if(r.email===e.userEmail)return c("You are owner of this group so you do not need to join.");if(i>=u)return c("The group activity has already started, so you cannot join.");if((await l.fire({title:"Are you sure?",text:"You will permanently join the group!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, join it!"})).isConfirmed)try{const d=await fetch("https://express-server-for-practice.vercel.app/savejoineduser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r==null?void 0:r.email,groupId:e==null?void 0:e._id})});if(d.ok)await l.fire("Success!","You have successfully joined the group.","success"),v("/All Groups");else{const N=await d.json();l.fire("Error",N.message||"Update failed","error")}}catch{l.fire("Error","Something went wrong.","error")}};return j?t.jsx("div",{className:"text-center text-white",children:"Loading..."}):h?t.jsx("div",{className:"text-center text-red-500",children:h}):e?t.jsx("div",{className:"p-6 w-full h-full inline-flex justify-center items-center",children:t.jsxs("div",{className:"bg-gradient-to-tr h-full max-w-2xl w-full pb-2 overflow-visible from-indigo-950 via-purple-950 to-blue-950/10 rounded-2xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 cursor-pointer",children:[t.jsxs("div",{className:"relative h-48 overflow-hidden rounded-t-2xl",children:[t.jsx("img",{src:e.imageUrl,alt:e.groupName,className:"w-full h-full object-cover brightness-90 hover:brightness-110 transition duration-300"}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4",children:[t.jsx("h2",{className:"text-white text-2xl font-bold truncate",children:e.groupName}),t.jsx("p",{className:"text-gray-300 text-sm truncate",children:e.hobbyCategory})]})]}),t.jsxs("div",{className:"p-5 h-52 relative space-y-3 bg-white text-gray-900 rounded-b-2xl",children:[t.jsx("p",{className:"text-sm line-clamp-3",children:e.description}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-600 font-semibold",children:[t.jsxs("span",{children:["üìç ",e.location]}),t.jsxs("span",{children:["üë• Max: ",e.maxMembers]})]}),t.jsxs("div",{className:"text-xs text-gray-500 font-medium",children:["Start Date: ",t.jsx("time",{dateTime:e.startDate,children:E(e.startDate)})]}),t.jsxs("div",{className:"text-xs text-gray-400 italic",children:["Created by: ",e.userName," (",e.userEmail,")"]}),t.jsx("button",{onClick:y,className:"block absolute bottom-4 left-4 right-4 text-center mt-3 py-2 rounded-lg bg-indigo-600 text-white font-semibold hover:bg-indigo-700 transition",children:w})]})]})}):null};export{k as default};
